<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë‹¬ìƒˆë²½ ì„œì  ë ˆí† ë¥´íŠ¸</title>
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
  <style>
    :root {
      --paper-cream: #F7F1E5;
      --soft-peach: #F8EAD8;
      --warm-cream: #EDDBC7;
      --book-brown: #8D7B68;
      --gentle-brown: #A7727D;
      --soft-purple: #E4D0D0;
      --calm-blue: #C8DBBE;
      --pale-sage: #D9E4DD;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Gowun Dodum', sans-serif;
      background-color: var(--paper-cream);
      color: var(--book-brown);
      line-height: 1.6;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      background-color: var(--soft-peach);
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      text-align: center;
    }
    
    h1, h2, h3 {
      color: var(--book-brown);
    }
    
    .header h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .status-bar {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
    }
    
    .card {
      background-color: var(--warm-cream);
      border: 1px solid var(--soft-peach);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .card h2 {
      font-size: 18px;
      margin-bottom: 10px;
      color: var(--book-brown);
    }
    
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    
    @media (max-width: 600px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
    
    .button {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'Gowun Dodum', sans-serif;
      font-size: 14px;
      transition: background-color 0.3s, transform 0.2s;
      border: 1px solid transparent;
      margin-right: 5px;
      margin-bottom: 5px;
      text-align: center;
    }
    
    .button:hover {
      transform: translateY(-2px);
    }
    
    .button-primary {
      background-color: var(--gentle-brown);
      color: white;
      border-color: var(--gentle-brown);
    }
    
    .button-primary:hover {
      background-color: rgba(167, 114, 125, 0.9);
    }
    
    .button-secondary {
      background-color: var(--calm-blue);
      color: var(--book-brown);
      border-color: var(--warm-cream);
    }
    
    .button-secondary:hover {
      background-color: var(--pale-sage);
    }
    
    .button-tertiary {
      background-color: var(--soft-purple);
      color: var(--book-brown);
      border-color: var(--pale-sage);
    }
    
    .button-tertiary:hover {
      background-color: rgba(228, 208, 208, 0.8);
    }
    
    .button-disabled {
      background-color: #e0e0e0;
      color: #a0a0a0;
      cursor: not-allowed;
    }
    
    .button-disabled:hover {
      transform: none;
    }
    
    .button-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .quote-container {
      max-height: 200px;
      overflow-y: auto;
      padding-right: 5px;
    }
    
    .quote-item {
      background-color: var(--soft-peach);
      border: 1px solid var(--pale-sage);
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 10px;
    }
    
    .quote-text {
      font-style: italic;
    }
    
    .quote-author {
      text-align: right;
      color: var(--gentle-brown);
      font-size: 14px;
    }
    
    .screen {
      display: none;
    }
    
    .active {
      display: block;
    }
    
    .notification {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: var(--gentle-brown);
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
      border: 1px solid var(--soft-peach);
    }
    
    .notification.show {
      opacity: 1;
    }
    
    .dialogue-box {
      background-color: var(--soft-peach);
      border: 1px solid var(--warm-cream);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
    }
    
    .puzzle-slot {
      border: 1px solid var(--gentle-brown);
      background-color: white;
      min-height: 40px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 5px;
      font-weight: bold;
    }
    
    .puzzle-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 15px 0;
    }
    
    .character-info {
      font-style: italic;
      color: var(--gentle-brown);
      margin-bottom: 15px;
    }
    
    .book-icon {
      font-size: 20px;
      margin-right: 5px;
    }
    
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
      
      .button {
        width: 100%;
        margin-right: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ë©”ì¸ í™”ë©´ -->
    <div id="main-screen" class="screen active">
      <div class="header">
        <h1>ğŸ“š ë‹¬ìƒˆë²½ ì„œì </h1>
        <div class="status-bar">
          <span id="day-display">ë‚ ì§œ: 1ì¼ì°¨</span>
          <span id="time-display">ì‹œê°„: 10:00</span>
          <span id="money-display">ì†Œì§€ê¸ˆ: 1000ì›</span>
        </div>
      </div>
      
      <div class="grid">
        <div class="card">
          <h2>ì„œì  ê´€ë¦¬</h2>
          <button onclick="switchScreen('cafe-screen')" class="button button-primary">ì¹´í˜ ê´€ë¦¬í•˜ê¸°</button>
          <button onclick="advanceTime(2)" class="button button-secondary">ì‹œê°„ ë³´ë‚´ê¸° (2ì‹œê°„)</button>
        </div>
        
        <div class="card">
          <h2>ìƒˆë²½ ì—´ëŒ ëª¨ë“œ <span id="night-mode-status">(ë¹„í™œì„±)</span></h2>
          <div class="button-group">
            <button onclick="startDialogue('ë“œë¼ë§ˆì‹œë‚˜ë¦¬ì˜¤')" class="button button-disabled" id="drama-button" disabled>ë“œë¼ë§ˆ ì‹œë‚˜ë¦¬ì˜¤ì§‘ê³¼ ëŒ€í™”í•˜ê¸°</button>
            <button onclick="startDialogue('ì‚¬ì§„ì§‘')" class="button button-disabled" id="photo-button" disabled>ì‚¬ì§„ì§‘ê³¼ ëŒ€í™”í•˜ê¸°</button>
            <button onclick="startDialogue('ê³ ì„œë²ˆì—­ì„œ')" class="button button-disabled" id="ancient-button" disabled>ê³ ì„œ ë²ˆì—­ì„œì™€ ëŒ€í™”í•˜ê¸°</button>
          </div>
        </div>
      </div>
      
      <div class="grid">
        <div class="card">
          <h2>ëª…ì–¸ í¼ì¦</h2>
          <button onclick="startPuzzle()" class="button button-secondary">ëª…ì–¸ í¼ì¦ í’€ê¸°</button>
        </div>
        
        <div class="card">
          <h2>ë¬¸ì¥ í…Œë¼í”¼ ì•¨ë²”</h2>
          <div class="quote-container" id="quotes-container">
            <p id="no-quotes-message">ì•„ì§ ìˆ˜ì§‘ëœ ëª…ì–¸ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            <!-- ì—¬ê¸°ì— ëª…ì–¸ë“¤ì´ ì¶”ê°€ë©ë‹ˆë‹¤ -->
          </div>
        </div>
      </div>
    </div>
    
    <!-- ëŒ€í™” í™”ë©´ -->
    <div id="dialogue-screen" class="screen">
      <div class="header">
        <h1 id="character-name">ìºë¦­í„° ì´ë¦„</h1>
        <p id="character-personality" class="character-info">(ìºë¦­í„° ì„±ê²©)</p>
      </div>
      
      <div class="card">
        <div class="dialogue-box" id="dialogue-text">
          ëŒ€í™” ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
        </div>
        
        <div class="button-group" id="dialogue-choices">
          <!-- ì„ íƒì§€ê°€ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>
      </div>
      
      <button onclick="switchScreen('main-screen')" class="button button-primary">ëŒ€í™” ë‚˜ê°€ê¸°</button>
    </div>
    
    <!-- ì¹´í˜ ê´€ë¦¬ í™”ë©´ -->
    <div id="cafe-screen" class="screen">
      <div class="header">
        <h1>ì¹´í˜ ê´€ë¦¬</h1>
      </div>
      
      <div class="card">
        <h2>ì¸í…Œë¦¬ì–´ (í˜„ì¬ ë ˆë²¨: <span id="interior-level">1</span>)</h2>
        <div class="button-group">
          <div>
            <button onclick="upgradeInterior(1)" class="button button-primary" id="interior-1">ë ˆë²¨ 1 (200ì›)</button>
            <button onclick="upgradeInterior(2)" class="button button-secondary" id="interior-2">ë ˆë²¨ 2 (400ì›)</button>
            <button onclick="upgradeInterior(3)" class="button button-secondary" id="interior-3">ë ˆë²¨ 3 (600ì›)</button>
          </div>
          <div>
            <button onclick="upgradeInterior(4)" class="button button-secondary" id="interior-4">ë ˆë²¨ 4 (800ì›)</button>
            <button onclick="upgradeInterior(5)" class="button button-secondary" id="interior-5">ë ˆë²¨ 5 (1000ì›)</button>
          </div>
        </div>
      </div>
      
      <div class="card">
        <h2>ìŒë£Œ ë ˆì‹œí”¼ (í˜„ì¬ ë ˆë²¨: <span id="recipe-level">1</span>)</h2>
        <div class="button-group">
          <div>
            <button onclick="upgradeRecipe(1)" class="button button-primary" id="recipe-1">ë ˆë²¨ 1 (150ì›)</button>
            <button onclick="upgradeRecipe(2)" class="button button-secondary" id="recipe-2">ë ˆë²¨ 2 (300ì›)</button>
            <button onclick="upgradeRecipe(3)" class="button button-secondary" id="recipe-3">ë ˆë²¨ 3 (450ì›)</button>
          </div>
          <div>
            <button onclick="upgradeRecipe(4)" class="button button-secondary" id="recipe-4">ë ˆë²¨ 4 (600ì›)</button>
            <button onclick="upgradeRecipe(5)" class="button button-secondary" id="recipe-5">ë ˆë²¨ 5 (750ì›)</button>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="dialogue-box">
          <p>ì¸í…Œë¦¬ì–´ì™€ ìŒë£Œ ë ˆì‹œí”¼ë¥¼ í–¥ìƒì‹œí‚¤ë©´ ì„œì  ìˆ˜ìµì´ ì¦ê°€í•©ë‹ˆë‹¤!</p>
          <p><strong>í˜„ì¬ ì˜ˆìƒ ì¼ì¼ ìˆ˜ìµ: <span id="daily-income">90</span>ì›</strong></p>
        </div>
      </div>
      
      <button onclick="operateCafe()" class="button button-primary">ì¹´í˜ ìš´ì˜í•˜ê³  ëŒì•„ê°€ê¸°</button>
    </div>
    
    <!-- í¼ì¦ í™”ë©´ -->
    <div id="puzzle-screen" class="screen">
      <div class="header">
        <h1>ëª…ì–¸ í¼ì¦</h1>
      </div>
      
      <div class="card">
        <div class="dialogue-box">
          <p id="puzzle-text">í¼ì¦ í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
          
          <div class="grid" style="margin: 15px 0;">
            <div class="puzzle-slot" id="puzzle-slot-0">___</div>
            <div class="puzzle-slot" id="puzzle-slot-1">___</div>
          </div>
          
          <div class="puzzle-options" id="puzzle-options">
            <!-- í¼ì¦ ì˜µì…˜ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
          </div>
        </div>
        
        <div style="display: flex; justify-content: space-between; margin-top: 15px;">
          <button onclick="resetPuzzle()" class="button button-secondary">ì´ˆê¸°í™”</button>
          <button onclick="submitPuzzle()" class="button button-primary">ì œì¶œí•˜ê¸°</button>
        </div>
      </div>
      
      <button onclick="switchScreen('main-screen')" class="button button-secondary">í¼ì¦ ë‚˜ê°€ê¸°</button>
    </div>
  </div>
  
  <div class="notification" id="notification">ì•Œë¦¼ ë©”ì‹œì§€</div>
  
  <script>
    // ê²Œì„ ìƒíƒœ
    const gameState = {
      day: 1,
      time: 10,
      isNight: false,
      money: 1000,
      relationships: {
        "ë“œë¼ë§ˆì‹œë‚˜ë¦¬ì˜¤": 0,
        "ì‚¬ì§„ì§‘": 0,
        "ê³ ì„œë²ˆì—­ì„œ": 0
      },
      collectedQuotes: [],
      cafeState: {
        interior: 1,
        recipe: 1
      }
    };
    
    // ìºë¦­í„° ë°ì´í„°
    const characters = {
      "ë“œë¼ë§ˆì‹œë‚˜ë¦¬ì˜¤": {
        name: "ë“œë¼ë§ˆ ì‹œë‚˜ë¦¬ì˜¤ì§‘",
        personality: "ìˆ˜ë‹¤ìŠ¤ëŸ½ê³  ë“œë¼ë§ˆí‹±í•œ",
        dialogues: [
          { text: "ì•ˆë…•! ë‚œ ë“œë¼ë§ˆ ì‹œë‚˜ë¦¬ì˜¤ì§‘ì´ì•¼. ìš”ì¦˜ ì‚¬ëŒë“¤ ì‚¬ì´ì—ì„œ ë¬´ìŠ¨ ì´ì•¼ê¸°ê°€ ìœ í–‰í•˜ëŠ”ì§€ ê¶ê¸ˆí•´?", choices: ["ì‘, ì•Œë ¤ì¤˜!", "ì§€ê¸ˆì€ ë°”ë¹ "] },
          { text: "ìš”ì¦˜ì—” ì‚¬ë‘ë³´ë‹¤ ì¼ìƒì˜ ì†Œì†Œí•œ í–‰ë³µì„ ë‹¤ë£¨ëŠ” ì´ì•¼ê¸°ê°€ ì¸ê¸°ë˜. 'ì‚¬ì†Œí•œ ê²ƒë“¤ì˜ ì•„ë¦„ë‹¤ì›€'ì´ë¼ëŠ” ë§ì´ ìˆì–ì•„.", choices: ["ê·¸ëŸ° ëª…ì–¸ ì¢€ ë” ì•Œë ¤ì¤˜", "ê·¸ëŸ°ë° ë„ˆëŠ” ì–´ë–¤ ì´ì•¼ê¸°ê°€ ì¢‹ì•„?"] },
          { text: "ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ê±´ ì—­ì‹œ ë°˜ì „ì´ ìˆëŠ” ì´ì•¼ê¸°ì§€! ì‚¶ë„ ê·¸ë ‡ì–ì•„. ì˜ˆìƒì¹˜ ëª»í•œ ì „ê°œê°€ í•­ìƒ ê¸°ë‹¤ë¦¬ê³  ìˆìœ¼ë‹ˆê¹Œ.", choices: ["ì™€, ì² í•™ì ì´ë„¤", "ì˜¤ëŠ˜ì€ ì´ë§Œ ëŒ€í™”ë¥¼ ë§ˆì¹˜ì"] }
        ]
      },
      "ì‚¬ì§„ì§‘": {
        name: "ì‚¬ì§„ì§‘",
        personality: "ì¡°ìš©í•˜ê³  ê´€ì°°ë ¥ ìˆëŠ”",
        dialogues: [
          { text: "(ì‚¬ì§„ì§‘ì´ ì¡°ìš©íˆ ë¯¸ì†Œì§“ê³  ìˆìŠµë‹ˆë‹¤)", choices: ["ì•ˆë…•, ì˜¤ëŠ˜ ê¸°ë¶„ì´ ì–´ë•Œ?", "ë©‹ì§„ ì‚¬ì§„ë“¤ì„ ê°–ê³  ìˆêµ¬ë‚˜"] },
          { text: "(ì±…ì¥ì„ ë„˜ê¸°ë©°) ë•Œë¡œëŠ” ë§ë³´ë‹¤ ì´ë¯¸ì§€ê°€ ë” ë§ì€ ê²ƒì„ ì „ë‹¬í•˜ì§€...", choices: ["ì–´ë–¤ ì‚¬ì§„ì´ ê°€ì¥ ë§ˆìŒì— ë“¤ì–´?", "ì‚¬ì§„ ì°ëŠ” ë²•ì— ëŒ€í•´ ì¡°ì–¸í•´ì¤„ë˜?"] },
          { text: "ë¹›ì„ ì°¾ëŠ” ê²ƒ. ê·¸ê²Œ ì‚¬ì§„ì˜ í•µì‹¬ì´ì•¼. ì¸ìƒë„ ë§ˆì°¬ê°€ì§€ì§€ë§Œ...", choices: ["ê¹Šì€ ì´ì•¼ê¸°ë„¤", "ë„ˆì˜ í˜ì´ì§€ì—ì„œ ê°€ì¥ ë°ì€ ìˆœê°„ì€?"] }
        ]
      },
      "ê³ ì„œë²ˆì—­ì„œ": {
        name: "ê³ ì„œ ë²ˆì—­ì„œ",
        personality: "ì§€ì‹ì´ í’ë¶€í•˜ì§€ë§Œ ê¼°ëŒ€ ê°™ì€",
        dialogues: [
          { text: "í , ìš”ì¦˜ ì Šì€ì´ë“¤ì€ ê³ ì „ì„ ì½ì§€ ì•Šì•„ì„œ ì•ˆíƒ€ê¹êµ°. ë‚´ ì‹œì ˆì—ëŠ”...", choices: ["ê³ ì „ ì¤‘ì— ì¶”ì²œí•  ë§Œí•œ ì±…ì´ ìˆë‚˜ìš”?", "í¥ë¯¸ë¡œìš´ ì—­ì‚¬ì  ì‚¬ì‹¤ì„ ì•Œë ¤ì£¼ì„¸ìš”"] },
          { text: "ì†Œí¬ë¼í…ŒìŠ¤ê°€ ë§í–ˆë“¯, 'ë„ˆ ìì‹ ì„ ì•Œë¼'ê°€ ëª¨ë“  ì§€í˜œì˜ ì‹œì‘ì´ë„¤. í•˜ì§€ë§Œ ìš”ì¦˜ ì‚¬ëŒë“¤ì€ ìê¸°ì„±ì°°ì´ ë¶€ì¡±í•´.", choices: ["ë” ë§ì€ ëª…ì–¸ì„ ì•Œê³  ì‹¶ì–´ìš”", "ë‹¤ë¥¸ ì² í•™ìë“¤ì€ ì–´ë–¤ ìƒê°ì„ í–ˆë‚˜ìš”?"] },
          { text: "ì§€ì‹ì€ í˜ì´ì§€ë§Œ, ê·¸ê²ƒì„ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠëƒê°€ ë” ì¤‘ìš”í•˜ë„¤. ì†ìë³‘ë²•ì—ë„ ë‚˜ì˜¤ë“¯...", choices: ["ì™€, ì •ë§ ë°•ì‹í•˜ì‹œë„¤ìš”", "ì˜¤ëŠ˜ì€ ì´ë§Œ ëŒ€í™”ë¥¼ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤"] }
        ]
      }
    };
    
    // í¼ì¦ ë°ì´í„°
    const quotePuzzles = [
      {
        quote: "ì‚¬ë‘ì€ ëˆˆìœ¼ë¡œ ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë§ˆìŒìœ¼ë¡œ ë³´ëŠ” ê²ƒì´ë‹¤",
        author: "ì…°ìµìŠ¤í”¼ì–´",
        puzzle: "ì‚¬ë‘ì€ _ìœ¼ë¡œ ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ _ìœ¼ë¡œ ë³´ëŠ” ê²ƒì´ë‹¤",
        options: ["ì†", "ëˆˆ", "ë§ˆìŒ", "ê·€", "ì…", "ë°œ"],
        solution: ["ëˆˆ", "ë§ˆìŒ"]
      },
      {
        quote: "ë‚´ì¼ì€ ë‚´ì¼ì˜ íƒœì–‘ì´ ëœ¬ë‹¤",
        author: "ìŠ¤ì¹¼ë › ì˜¤í•˜ë¼",
        puzzle: "_ì€ _ì˜ íƒœì–‘ì´ ëœ¬ë‹¤",
        options: ["ì˜¤ëŠ˜", "ë‚´ì¼", "ì–´ì œ", "ì•„ì¹¨", "ì €ë…", "ë¯¸ë˜"],
        solution: ["ë‚´ì¼", "ë‚´ì¼"]
      },
      {
        quote: "ì§„ì •í•œ ë°œê²¬ì˜ ì—¬í–‰ì€ ìƒˆë¡œìš´ í’ê²½ì„ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ëˆˆì„ ê°–ëŠ” ê²ƒì´ë‹¤",
        author: "ë§ˆë¥´ì…€ í”„ë£¨ìŠ¤íŠ¸",
        puzzle: "ì§„ì •í•œ ë°œê²¬ì˜ ì—¬í–‰ì€ ìƒˆë¡œìš´ _ì„ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ _ì„ ê°–ëŠ” ê²ƒì´ë‹¤",
        options: ["ì„¸ê³„", "í’ê²½", "ì§€ë„", "ì¸ìƒ", "ê¸¸", "ëˆˆ"],
        solution: ["í’ê²½", "ëˆˆ"]
      }
    ];
    
    // í˜„ì¬ ìƒíƒœ ë³€ìˆ˜
    let currentScreen = 'main-screen';
    let activeNPC = null;
    let dialogueIndex = 0;
    let activePuzzle = null;
    let puzzleAnswers = ["", ""];
    
    // í™”ë©´ ì „í™˜ í•¨ìˆ˜
    function switchScreen(screenId) {
      document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
      });
      document.getElementById(screenId).classList.add('active');
      currentScreen = screenId;
    }
    
    // ì‹œê°„ ì§„í–‰ í•¨ìˆ˜
    function advanceTime(hours) {
      gameState.time = (gameState.time + hours) % 24;
      
      // ë‚ ì§œ ë³€ê²½ í™•ì¸
      if (gameState.time < hours) {
        gameState.day++;
      }
      
      // ìƒˆë²½ ëª¨ë“œ í™•ì¸ (0ì‹œ~6ì‹œ)
      const wasNight = gameState.isNight;
      gameState.isNight = (gameState.time >= 0 && gameState.time < 6);
      
      if (gameState.isNight && !wasNight) {
        showNotification("ìƒˆë²½ ì—´ëŒ ëª¨ë“œê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤! ì±…ë“¤ì´ ê¹¨ì–´ë‚¬ì–´ìš”.");
      }
      
      updateUI();
    }
    
    // ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
    function showNotification(message) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }
    
    // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateUI() {
      // ìƒíƒœë°” ì—…ë°ì´íŠ¸
      document.getElementById('day-display').textContent = `ë‚ ì§œ: ${gameState.day}ì¼ì°¨`;
      document.getElementById('time-display').textContent = `ì‹œê°„: ${gameState.time}:00`;
      document.getElementById('money-display').textContent = `ì†Œì§€ê¸ˆ: ${gameState.money}ì›`;
      
      // ìƒˆë²½ ëª¨ë“œ ìƒíƒœ ì—…ë°ì´íŠ¸
      document.getElementById('night-mode-status').textContent = gameState.isNight ? '(í™œì„±)' : '(ë¹„í™œì„±)';
      
      // ëŒ€í™” ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
      const dialogueButtons = ['drama-button', 'photo-button', 'ancient-button'];
      dialogueButtons.forEach(buttonId => {
        const button = document.getElementById(buttonId);
        if (gameState.isNight) {
          button.classList.remove('button-disabled');
          button.classList.add('button-tertiary');
          button.disabled = false;
        } else {
          button.classList.add('button-disabled');
          button.classList.remove('button-tertiary');
          button.disabled = true;
        }
      });
      
      // ì¹´í˜ ê´€ë¦¬ í™”ë©´ ì—…ë°ì´íŠ¸
      document.getElementById('interior-level').textContent = gameState.cafeState.interior;
      document.getElementById('recipe-level').textContent = gameState.cafeState.recipe;
      
      // ì¼ì¼ ìˆ˜ìµ ê³„ì‚° ë° í‘œì‹œ
      const dailyIncome = (gameState.cafeState.interior * 50) + (gameState.cafeState.recipe * 40);
      document.getElementById('daily-income').textContent = dailyIncome;
      
      // ì¸í…Œë¦¬ì–´ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
      for (let i = 1; i <= 5; i++) {
        const button = document.getElementById(`interior-${i}`);
        if (i === gameState.cafeState.interior) {
          button.classList.remove('button-secondary');
          button.classList.add('button-primary');
        } else {
          button.classList.remove('button-primary');
          button.classList.add('button-secondary');
        }
      }
      
      // ë ˆì‹œí”¼ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
      for (let i = 1; i <= 5; i++) {
        const button = document.getElementById(`recipe-${i}`);
        if (i === gameState.cafeState.recipe) {
          button.classList.remove('button-secondary');
          button.classList.add('button-primary');
        } else {
          button.classList.remove('button-primary');
          button.classList.add('button-secondary');
        }
      }
      
      // ëª…ì–¸ ì•¨ë²” ì—…ë°ì´íŠ¸
      const quotesContainer = document.getElementById('quotes-container');
      const noQuotesMessage = document.getElementById('no-quotes-message');
      
      if (gameState.collectedQuotes.length > 0) {
        noQuotesMessage.style.display = 'none';
        
        // ê¸°ì¡´ ëª…ì–¸ ì œê±°
        while (quotesContainer.children.length > 1) {
          quotesContainer.removeChild(quotesContainer.lastChild);
        }
        
        // ìƒˆ ëª…ì–¸ ì¶”ê°€
        gameState.collectedQuotes.forEach(quote => {
          const quoteElement = document.createElement('div');
          quoteElement.className = 'quote-item';
          
          const quoteText = document.createElement('p');
          quoteText.className = 'quote-text';
          quoteText.textContent = `"${quote.text}"`;
          
          const quoteAuthor = document.createElement('p');
          quoteAuthor.className = 'quote-author';
          quoteAuthor.textContent = `- ${quote.author}`;
          
          quoteElement.appendChild(quoteText);
          quoteElement.appendChild(quoteAuthor);
          quotesContainer.appendChild(quoteElement);
        });
      } else {
        noQuotesMessage.style.display = 'block';
      }
    }
    
    // ëŒ€í™” ì‹œì‘ í•¨ìˆ˜
    function startDialogue(npcId) {
      if (!gameState.isNight) {
        showNotification("ì±…ë“¤ì€ ìƒˆë²½(0ì‹œ~6ì‹œ)ì—ë§Œ ëŒ€í™”í•  ìˆ˜ ìˆì–´ìš”.");
        return;
      }
      
      activeNPC = npcId;
      dialogueIndex = 0;
      
      // ìºë¦­í„° ì •ë³´ ì„¤ì •
      const character = characters[npcId];
      document.getElementById('character-name').textContent = character.name;
      document.getElementById('character-personality').textContent = `(${character.personality})`;
      
      // ëŒ€í™” ë‚´ìš© ì„¤ì •
      const dialogue = character.dialogues[dialogueIndex];
      document.getElementById('dialogue-text').textContent = dialogue.text;
      
      // ì„ íƒì§€ ì„¤ì •
      const choicesContainer = document.getElementById('dialogue-choices');
      choicesContainer.innerHTML = '';
      
      dialogue.choices.forEach((choice, index) => {
        const button = document.createElement('button');
        button.className = 'button button-tertiary';
        button.textContent = choice;
        button.onclick = () => continueDialogue(index);
        choicesContainer.appendChild(button);
      });
      
      switchScreen('dialogue-screen');
    }
    
    // ëŒ€í™” ê³„ì† í•¨ìˆ˜
    function continueDialogue(choiceIndex) {
      // ê´€ê³„ë„ í–¥ìƒ
      gameState.relationships[activeNPC]++;
      
      // ë‹¤ìŒ ëŒ€í™”ë¡œ ì´ë™
      if (dialogueIndex < characters[activeNPC].dialogues.length - 1) {
        dialogueIndex++;
        
        // ìƒˆ ëŒ€í™” ë‚´ìš© ì„¤ì •
        const dialogue = characters[activeNPC].dialogues[dialogueIndex];
        document.getElementById('dialogue-text').textContent = dialogue.text;
        
        // ìƒˆ ì„ íƒì§€ ì„¤ì •
        const choicesContainer = document.getElementById('dialogue-choices');
        choicesContainer.innerHTML = '';
        
        dialogue.choices.forEach((choice, index) => {
          const button = document.createElement('button');
          button.className = 'button button-tertiary';
          button.textContent = choice;
          button.onclick = () => continueDialogue(index);
          choicesContainer.appendChild(button);
        });
      } else {
        // ëŒ€í™” ì¢…ë£Œ
        switchScreen('main-screen');
        showNotification(`${characters[activeNPC].name}ê³¼ì˜ ëŒ€í™”ê°€ ëë‚¬ìŠµë‹ˆë‹¤.`);
      }
    }
    
    // ì¹´í˜ ì¸í…Œë¦¬ì–´ ì—…ê·¸ë ˆì´ë“œ í•¨ìˆ˜
    function upgradeInterior(level) {
      const cost = level * 200;
      
      if (gameState.money >= cost) {
        gameState.money -= cost;
        gameState.cafeState.interior = level;
        showNotification(`ì¸í…Œë¦¬ì–´ë¥¼ ë ˆë²¨ ${level}ë¡œ ì—…ê·¸ë ˆì´ë“œí–ˆìŠµë‹ˆë‹¤!`);
        updateUI();
      } else {
        showNotification("ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤!");
      }
    }
    
    // ìŒë£Œ ë ˆì‹œí”¼ ì—…ê·¸ë ˆì´ë“œ í•¨ìˆ˜
    function upgradeRecipe(level) {
      const cost = level * 150;
      
      if (gameState.money >= cost) {
        gameState.money -= cost;
        gameState.cafeState.recipe = level;
        showNotification(`ìŒë£Œ ë ˆì‹œí”¼ë¥¼ ë ˆë²¨ ${level}ë¡œ ì—…ê·¸ë ˆì´ë“œí–ˆìŠµë‹ˆë‹¤!`);
        updateUI();
      } else {
        showNotification("ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤!");
      }
    }
    
    // ì¹´í˜ ìš´ì˜ í•¨ìˆ˜
    function operateCafe() {
      // ì‹œê°„ ì§„í–‰
      advanceTime(8);
      
      // ìˆ˜ìµ ê³„ì‚° ë° ì¶”ê°€
      const income = (gameState.cafeState.interior * 50) + (gameState.cafeState.recipe * 40);
      gameState.money += income;
      
      showNotification(`ì¹´í˜ ìš´ì˜ì„ ë§ˆì¹˜ê³  ${income}ì›ì˜ ìˆ˜ìµì„ ì–»ì—ˆìŠµë‹ˆë‹¤!`);
      switchScreen('main-screen');
    }
    
    // í¼ì¦ ì‹œì‘ í•¨ìˆ˜
    function startPuzzle() {
      // ëœë¤ í¼ì¦ ì„ íƒ
      const randomIndex = Math.floor(Math.random() * quotePuzzles.length);
      activePuzzle = quotePuzzles[randomIndex];
      puzzleAnswers = ["", ""];
      
      // í¼ì¦ í…ìŠ¤íŠ¸ ì„¤ì •
      document.getElementById('puzzle-text').textContent = activePuzzle.puzzle;
      
      // í¼ì¦ ìŠ¬ë¡¯ ì´ˆê¸°í™”
      document.getElementById('puzzle-slot-0').textContent = "___";
      document.getElementById('puzzle-slot-1').textContent = "___";
      
      // ì˜µì…˜ ë²„íŠ¼ ì„¤ì •
      const optionsContainer = document.getElementById('puzzle-options');
      optionsContainer.innerHTML = '';
      
      activePuzzle.options.forEach(option => {
        const button = document.createElement('button');
        button.className = 'button button-tertiary';
        button.textContent = option;
        button.onclick = () => selectPuzzleOption(option);
        optionsContainer.appendChild(button);
      });
      
      switchScreen('puzzle-screen');
    }
    
    // í¼ì¦ ì˜µì…˜ ì„ íƒ í•¨ìˆ˜
    function selectPuzzleOption(option) {
      const emptyIndex = puzzleAnswers.findIndex(a => a === "");
      if (emptyIndex !== -1) {
        puzzleAnswers[emptyIndex] = option;
        document.getElementById(`puzzle-slot-${emptyIndex}`).textContent = option;
      }
    }
    
    // í¼ì¦ ì´ˆê¸°í™” í•¨ìˆ˜
    function resetPuzzle() {
      puzzleAnswers = ["", ""];
      document.getElementById('puzzle-slot-0').textContent = "___";
      document.getElementById('puzzle-slot-1').textContent = "___";
    }
    
    // í¼ì¦ ì œì¶œ í•¨ìˆ˜
    function submitPuzzle() {
      // ëª¨ë“  ìŠ¬ë¡¯ì´ ì±„ì›Œì¡ŒëŠ”ì§€ í™•ì¸
      if (puzzleAnswers.some(answer => answer === "")) {
        showNotification("ëª¨ë“  ë¹ˆì¹¸ì„ ì±„ì›Œì£¼ì„¸ìš”!");
        return;
      }
      
      // ì •ë‹µ í™•ì¸
      const isCorrect = puzzleAnswers.every((answer, index) => 
        answer === activePuzzle.solution[index]
      );
      
      if (isCorrect) {
        // ëª…ì–¸ ìˆ˜ì§‘ ë° ë³´ìƒ
        gameState.collectedQuotes.push({
          text: activePuzzle.quote,
          author: activePuzzle.author
        });
        gameState.money += 100;
        
        showNotification("ì •ë‹µì…ë‹ˆë‹¤! ëª…ì–¸ì´ ì•¨ë²”ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
        switchScreen('main-screen');
        updateUI();
      } else {
        showNotification("í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.");
        resetPuzzle();
      }
    }
    
    // ì´ˆê¸° UI ì—…ë°ì´íŠ¸
    updateUI();
  </script>
</body>
</html>
